## 引言

在C++编程中，类（Class）是面向对象编程（OOP）的核心概念。它允许开发者将数据和行为封装在一起，形成一个自定义的数据类型。
## 什么是类？

类是C++中一种用户定义的数据类型，它将数据成员（变量）和成员函数（方法）封装在一起，形成一个逻辑单元。类可以看作是现实世界中事物的抽象模型，例如一个“人”类可以包含姓名、年龄等数据，以及吃饭、睡觉等行为。

**通俗比喻**： 类就像一个蓝图或模板，描述了对象的结构和行为。根据这个蓝图，可以创建多个实例（对象），每个对象都有自己的数据，但共享相同的行为。

### 类的定义语法

类的定义使用 class 关键字，语法如下：

~~~cpp
class 类名 {
    // 访问修饰符：public, protected, private
    public:
        // 公有成员：外部可访问
    protected:
        // 保护成员：子类可访问
    private:
        // 私有成员：仅类内部可访问
};
~~~

- **访问修饰符**：
    - public：成员可以从类外部访问。
    - private：成员只能在类内部访问（默认）。
    - protected：成员在类内部和派生类中可访问。
- **成员**：
    - 数据成员：存储数据的变量。
    - 成员函数：操作数据的函数。

**示例代码（简单类定义）**：

~~~cpp
#include <iostream>
#include <string>
using namespace std;

class Person {
private:
    string name;  // 私有数据成员
    int age;      // 私有数据成员

public:
    // 成员函数：设置姓名和年龄
    void setInfo(string n, int a) {
        name = n;
        age = a;
    }

    // 成员函数：显示信息
    void display() {
        cout << "姓名: " << name << ", 年龄: " << age << endl;
    }
};

int main() {
    Person p;  // 创建对象
    p.setInfo("张三", 25);
    p.display();  // 输出：姓名: 张三, 年龄: 25
    return 0;
}
~~~

### 类的对象

- 类本身是模板，不占用内存。
- 通过类创建的对象（实例）占用内存，每个对象有独立的成员变量，但共享成员函数。
- 对象可以通过.操作符访问公有成员。

**注意**：

- 类定义后必须以`;`结束。
- 类可以定义在全局或局部作用域，但通常在全局定义。

## 类的作用？

类是C++实现面向对象编程的基础，它的主要作用包括：

1. **封装（Encapsulation）**：将数据和操作数据的函数捆绑在一起，隐藏内部实现细节，只暴露必要的接口。这提高了代码的安全性和可维护性。
    - 示例：私有成员隐藏数据，公有函数提供访问接口。
2. **继承（Inheritance）**：允许一个类（子类）从另一个类（基类）派生，复用代码。子类可以继承基类的成员，并添加新功能。
    - 作用：代码复用，避免重复编写类似代码。
3. **多态（Polymorphism）**：通过虚函数和指针/引用，实现不同对象对同一消息的不同响应。
    - 作用：增强程序的灵活性和扩展性，例如统一接口处理不同类型的对象。
4. **抽象（Abstraction）**：类可以定义抽象接口（纯虚函数），隐藏复杂实现，提供简单使用方式。
    - 作用：简化复杂系统，关注“做什么”而非“怎么做”。
5. **数据保护**：通过访问修饰符控制成员的可见性，防止外部直接修改内部数据。

**示例（继承与多态）**：

~~~cpp
#include <iostream>
using namespace std;

class Animal {  // 基类
public:
    virtual void sound() {  // 虚函数
        cout << "动物发声" << endl;
    }
};

class Dog : public Animal {  // 子类继承
public:
    void sound() override {
        cout << "汪汪" << endl;
    }
};

int main() {
    Animal *a = new Dog();  // 多态：基类指针指向子类对象
    a->sound();  // 输出：汪汪
    delete a;
    return 0;
}
~~~

**总结作用**：

- 类使代码更模块化、可复用和易扩展。
- 在实际开发中，类用于建模复杂实体，如图形库中的Shape类、游戏中的Player类等。

## 面试知识点

C++类的面试题通常考察基础概念、机制和最佳实践。以下是常见知识点及解答：

1. **类与结构体的区别**？
    - 类（class）默认成员为private，结构体（struct）默认成员为public。
    - 类常用于OOP，包含函数；结构体常用于简单数据聚合。
    - 两者均支持继承，但结构体更适合C风格兼容。
    - 除了可见性两者并无本质区别。
2. **构造函数和析构函数**？
    - **构造函数**：类名相同，无返回值，用于初始化对象。类型包括默认、参数化、拷贝、移动（C++11）。
        - 示例：Person(string n) : name(n) {}（初始化列表）。
    - **析构函数**：~类名()，无参数，用于清理资源（如释放动态内存）。
        - 示例：~Person() { cout << "析构" << endl; }。
    - 面试点：拷贝构造函数何时调用？（值传递、初始化时）；深拷贝 vs. 浅拷贝（处理指针成员）。
3. **this指针**？
    - this是一个隐式指针，指向当前对象本身。
    - 作用：区分成员变量与参数（如this->name = name;）；返回*this支持链式调用。
    - 面试点：在非静态成员函数中可用；在const成员函数中为const指针。
4. **静态成员**？
    - static成员属于类而非对象，所有对象共享。
    - 静态数据成员：类外初始化；静态成员函数：无this，只能访问静态成员。
    - 示例：static int count; void increment() { count++; }。
    - 面试点：静态成员的生命周期（程序开始到结束）。
5. **友元（friend）**？
    - 友元函数/类可以访问类的私有成员。
    - 示例：friend void func(Person &p);。
    - 面试点：友元破坏封装，但用于操作符重载等场景。
6. **虚函数与纯虚函数**？
    - 虚函数：virtual，支持多态，通过虚表（vtable）实现动态绑定。
    - 纯虚函数：virtual void func() = 0;，使类成为抽象类，不能实例化。
    - 面试点：虚析构函数的作用（防止内存泄漏）；内联虚函数无效。
7. **类的内存布局**？
    - 数据成员按声明顺序存储，考虑对齐（padding）。
    - 虚函数增加虚表指针（vptr）。
    - 面试点：空类大小为1字节（区分不同对象）；多继承的菱形问题（虚继承解决）。
8. **RAII机制**？
    - Resource Acquisition Is Initialization：资源获取即初始化。
    - 通过构造函数获取资源，析构函数释放（如智能指针）。
    - 面试点：防止资源泄漏，尤其在异常处理中。

**示例面试题代码**：

~~~cpp
#include <iostream>
using namespace std;

class Base {
public:
    virtual ~Base() { cout << "Base 析构" << endl; }
};

class Derived : public Base {
public:
    ~Derived() { cout << "Derived 析构" << endl; }
};

int main() {
    Base *b = new Derived();
    delete b;  // 输出：Derived 析构 \n Base 析构（因虚析构）
    return 0;
}
~~~

**面试建议**：

- 理解OOP四大特性：封装、继承、多态、抽象。
- 练习代码：实现类继承、多态、重载操作符。
- 注意C++11新特性：移动语义、委托构造函数。

## 注意事项

1. **类的大小**：使用sizeof检查，注意对齐和虚表开销。
2. **默认成员**：如果未定义，编译器生成默认构造函数、拷贝构造函数等。
3. **异常安全**：构造函数抛异常时，对象不创建；析构不抛异常。
4. **最佳实践**：优先使用初始化列表；避免公有数据成员；使用const成员函数。
5. **与C的区别**：C++类支持OOP，C用struct模拟。

## 总结

类是C++强大特性的体现，通过封装数据和行为，它使程序更结构化和可扩展。掌握类的定义、作用和面试点，能显著提升你的编程水平。在实际项目中，多实践类的设计原则，如单一职责和开闭原则。如果你有特定问题，欢迎评论交流！学习C++类就像搭建积木，从简单模板开始，逐步构建复杂系统。